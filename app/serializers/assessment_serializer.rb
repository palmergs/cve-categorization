class AssessmentSerializer < ActiveModel::Serializer
  attributes :id,
      :value,
      :assessment,
      :user_assessment_count,
      :user_assessment_sum,
      :term_assessment_count,
      :term_assessment_sum,
      :likely_terms,
      :unlikely_terms

  belongs_to :vulnerability

  belongs_to :technology

  def id
    "#{ object.technology_id}.#{ object.vulnerability_id }"
  end

  def value
    if object.new_record?
      0
    else
      ua = object.user_assessments.first
      ua ? ua.value : 0
    end
  end
end
