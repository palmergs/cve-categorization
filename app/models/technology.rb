# Technology that may be affected by Vulnerabilities
class Technology < ApplicationRecord
  include Concerns::HasIds

  has_many :tech_terms, dependent: :destroy
  has_many :technology_vulnerabilities, dependent: :destroy

  scope :by_query, ->(q) {
    if q.present?
      str = normalized_query(str)
      if str.length > 1
        where("technologies.name like ?', '%#{ str }%")
      else
        where('1=0')
      end
    end
  }
end
