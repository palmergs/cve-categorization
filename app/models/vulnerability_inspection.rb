class VulnerabilityInspection < ApplicationRecord
  include Concerns::HasIds

  belongs_to :technology
  belongs_to :vulnerability, counter_cache: true

  validates :vulnerability, presence: true
  validates :indicator, presence: true, numericality: { 
    integer_only: true, 
    greater_than: -4, 
    less_than: 4 }

  scope :by_vulnerability, ->(id) {
    where(vulnerability_id: id.to_i) if id
  }

end
