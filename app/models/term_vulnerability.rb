class TermVulnerability < ApplicationRecord
  include Concerns::HasIds

  belongs_to :vulnerability, counter_cache: true
  belongs_to :tech_term

  before_save do |obj|
    obj.indicator = obj.tech_term.indicator
  end

  scope :by_vulnerability, ->(id) {
    if id
      where(vulnerability_id: id.to_i)
    end
  }

  scope :by_tech_term, ->(id) {
    if id
      where(tech_term_id: id.to_i)
    end
  }
end
