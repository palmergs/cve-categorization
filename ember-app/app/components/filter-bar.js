import Ember from 'ember';

export default Ember.Component.extend({
  classNames: [ 'nav-right' ],
  year: null,
  query: null,
  queryStr: null,

  yearEventChanged: Ember.observer('year', function() {
    const evt = this.get('year');
    if(evt.target && evt.target.value) {
      this.sendAction('yearChanged', evt.target.value);
    } else {
      this.sendAction('yearChanged', null);
    }
  }),

  queryEventChanged: Ember.observer('query', function() {
    const evt = this.get('query');
    if(evt.target && evt.target.value) {
      this.set('queryStr', evt.target.value);
    } else {
      this.set('queryStr', null);
    }
  }),

  sendQueryChanged() {
    const str = this.get('queryStr');
    if(str && str.trim().length > 0) {
      this.sendAction('queryChanged', str);
    } else {
      this.sendAction('queryChanged', null);
    }
  },

  actions: {
    submitQuery() { this.sendQueryChanged(); },

    checkForSubmit(evt) {
      if(evt && evt.key === 'Enter') { this.sendQueryChanged(); }
    }
  }
});
