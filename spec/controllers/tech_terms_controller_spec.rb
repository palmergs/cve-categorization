require 'rails_helper'

RSpec.describe TechTermsController, type: :controller do
  describe '#index' do
    it 'can return tech terms' do
      get :index, format: :json
      expect(response).to be_success
    end
  end

  describe '#show' do
    it 'can return a tech term' do
      term = create(:tech_term)
      get :show, format: :json, params: { id: term.id }
      expect(response).to be_success
    end
  end

  describe '#create' do
    it 'can create a tect term' do
      tech = create(:technology)
      post :create, format: :json, params: { tech_term: { technology_id: tech.id, term: Faker::Lorem.word, indicator: (rand(7) - 3) } }
      expect(response).to be_success
    end
  end

  describe '#update' do
    it 'can update a tech term' do
      term = create(:tech_term)
      put :update, format: :json, params: { id: term.id, tech_term: { indicator: 0 } }
      expect(response).to be_success
    end
  end

  describe '#destroy' do
    it 'can destroy a tech term' do
      term = create(:tech_term)
      delete :destroy, format: :json, params: { id: term.id }
      expect(response).to be_success
    end
  end
end
