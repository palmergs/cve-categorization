require 'rails_helper'

RSpec.feature 'creating a tech term' do
  scenario 'build associations to vulnerabilities' do
    vuln = create(:vulnerability, description: "This is a test of a Ruby on Rails vulnerability")

    create(:tech_term, term: 'ruby on rails')
    
    vuln.reload
    expect(vuln.term_vulnerabilities.count).to eq(1)
    expect(vuln.term_vulnerabilities_count).to eq(1)
    expect(vuln.vulnerability_inspections_count).to eq(0)
    expect(vuln.vulnerability_inspections.count).to eq(0)
  end
end
